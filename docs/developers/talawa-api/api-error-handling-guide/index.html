<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-developers/talawa-api/api-error-handling-guide" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.1.1">
<title data-rh="true">API Error Handling Guide | Talawa Project Documentation</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://docs.talawa.io/docs/developers/talawa-api/api-error-handling-guide"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="API Error Handling Guide | Talawa Project Documentation"><meta data-rh="true" name="description" content="This page outlines the core design principles for handling errors within the GraphQl Layer in Talawa-API code base and relaying said errors back to the client apps."><meta data-rh="true" property="og:description" content="This page outlines the core design principles for handling errors within the GraphQl Layer in Talawa-API code base and relaying said errors back to the client apps."><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://docs.talawa.io/docs/developers/talawa-api/api-error-handling-guide"><link data-rh="true" rel="alternate" href="https://docs.talawa.io/docs/developers/talawa-api/api-error-handling-guide" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.talawa.io/docs/developers/talawa-api/api-error-handling-guide" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.b819b250.css">
<script src="/assets/js/runtime~main.2f2b580f.js" defer="defer"></script>
<script src="/assets/js/main.ca9b0bde.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.png" alt="Talawa Logo" class="LogoAnimation themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.png" alt="Talawa Logo" class="LogoAnimation themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Talawa</b></a><a class="navbar__item navbar__link" href="/docs-mobile-user/">Mobile Guide</a><a class="navbar__item navbar__link" href="/docs-web-user/">Web Guide</a><a class="navbar__item navbar__link" href="/docs-admin/">Admin Guide</a><div class="navbar__item dropdown dropdown--hoverable"><a aria-current="page" class="navbar__link active" aria-haspopup="true" aria-expanded="false" role="button" href="/docs/">Developer Guide</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/">General</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/talawa-api-docs/modules">Talawa API</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/talawa-mobile-docs">Talawa Flutter Docs</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/talawa-admin-docs/modules">Talawa Admin</a></li></ul></div></div><div class="navbar__items navbar__items--right"><a href="https://github.com/PalisadoesFoundation" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><a href="https://www.youtube.com/@PalisadoesOrganization" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-youtube-link" aria-label="Palisadoes Youtube channel"></a><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><main class="docMainContainer_TBSr docMainContainerEnhanced_lQrH"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>API Error Handling Guide</h1></header><p>This page outlines the core design principles for handling errors within the GraphQl Layer in Talawa-API code base and relaying said errors back to the client apps.</p>
<ul>
<li><a href="#Introduction">Introduction</a></li>
<li><a href="#Problem-with-default-Graphql-Errors">Problem with default Graphql Errors</a></li>
<li><a href="#User-Errors-vs-Developer-Errors">User Errors vs Developer Errors</a>
<ul>
<li><a href="#When-To-Model-Errors-In-Schema-And-When-Not-To">When To Model Errors In Schema And When Not To</a></li>
</ul>
</li>
<li><a href="#Cases-Where-Errors-in-Schema-Is-Recommended">Cases Where Errors in Schema Is Recommended</a>
<ul>
<li><a href="#Multiple-Field-Level-Validation-Errors">Multiple Field Level Validation Errors</a></li>
<li><a href="#Atomic-Errors">Atomic Errors</a></li>
<li><a href="#Nested-Resolver-Errors-(Complex-Objects)">Nested Resolver Errors. (Complex Objects)</a></li>
<li><a href="#Nested-Resolvers-Errors-(Scalar-Fields)">Nested Resolvers Errors (Scalar Fields)</a></li>
</ul>
</li>
<li><a href="#Errors-Defined-in-Schema-Approach-vs-Default-GraphQL-Errors">Errors Defined in Schema Approach vs Default GraphQL Errors</a></li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="introduction">Introduction<a href="#introduction" class="hash-link" aria-label="Direct link to Introduction" title="Direct link to Introduction">​</a></h2>
<p>GraphQL is an excellent tool for building APIs, especially when there is a need to provide clients with more control over the data they receive from the server. With GraphQL, clients can fetch only the specific data they require in the payload returned by the server, resulting in a more efficient data exchange. The data is presented in a form that closely resembles a graph, which means that all data exchanged between the client and API should be thought of in terms of graphs (learn more at <a href="https://graphql.org/learn/thinking-in-graphs/" target="_blank" rel="noopener noreferrer">this link</a>).</p>
<p>GraphQL effectively resolves relations that exist in the business logic of the application using field resolvers, but only if the client explicitly requests those relations to be resolved. This approach reduces unnecessary computations for data that the clients don&#x27;t specifically need. A resolver is essentially a function with the same name as the field or relation it resolves and returns.</p>
<p>The returned data is structured as a graph, where each node represents a meaningful object in the context of the logic, and the edges represent the relations between them.</p>
<p>In summary, GraphQL allows clients to achieve the following (these points will be important later on):</p>
<ol>
<li>Query for a specific resolver that returns a relevant object (node) aligned with the API&#x27;s logic.</li>
<li>Fetch certain fields within the requested object (node) to optimize the request/response payload.</li>
<li>When resolving relations (edges), make a nested query for interrelated objects (nodes).</li>
<li>Treat each node within the nested query as an individual entity in the graph; errors in one node should not affect other nodes in the graph.</li>
</ol>
<p>This approach works perfectly when everything runs as expected. However, what happens if errors occur? How does GraphQL, by default, handle these four points that revolve around thinking in terms of graphs when mistakes are made?</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="problems-with-default-graphql-errors">Problems with Default GraphQL Errors<a href="#problems-with-default-graphql-errors" class="hash-link" aria-label="Direct link to Problems with Default GraphQL Errors" title="Direct link to Problems with Default GraphQL Errors">​</a></h2>
<p>Let&#x27;s delve into the issues related to default GraphQL errors through an example.</p>
<p>Suppose I am making a query on the <code>signUp</code> mutation, which requires the parameters <code>email</code>, <code>name</code>, and <code>password</code>. Now, let&#x27;s consider a scenario where there is no user with the given email. In such a case, the default response is as follows:</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">\{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;data&quot;: \{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;signUp&quot;: null</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;errors&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    \{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;path&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;login&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;locations&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        \{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;line&quot;: 2,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;column&quot;: 3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;message&quot;: &quot;User not found&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="problems-with-this-approach">Problems with This Approach<a href="#problems-with-this-approach" class="hash-link" aria-label="Direct link to Problems with This Approach" title="Direct link to Problems with This Approach">​</a></h4>
<p>The current approach has several issues that can pose challenges for developers:</p>
<ol>
<li>
<p>Lack of Type Safety in <code>errors</code> Key:
The <code>errors</code> key in a GraphQL response lacks type safety. GraphQL is appreciated for its consistency and type safety, which unfortunately isn&#x27;t fully carried over to the <code>errors</code> array. While the errors are specified, introspection does not provide the client with detailed information about what to expect in those errors. This lack of clarity makes the <code>errors</code> array harder to evolve and extend.</p>
</li>
<li>
<p>Null Values in Nested Resolvers:
When the <code>errors</code> array is present in the response, the resulting query will return <code>null</code> in the <code>data</code> field. However, if a non-nullable field returns <code>null</code>, GraphQL will raise an error. Consequently, if a nested resolver returns a null value, the entire data object is returned as null, and the error message won&#x27;t provide additional information about why the field returned null unless explicitly handled in the resolver. Handling nullable nested resolvers introduces complexities for client applications, as they need to make extra efforts to extract and customize errors.</p>
</li>
<li>
<p>Complexity of GraphQL Errors vs. API Domain Errors:
GraphQL errors are designed to encode exceptional scenarios, such as when a service is down or an internal failure occurs. However, errors that are part of the API domain should ideally be captured within that domain and relayed to the client as informational messages, not GraphQL errors. Distinguishing between GraphQL errors and domain-specific errors is crucial for a more effective error-handling strategy.</p>
</li>
</ol>
<p>By addressing these problems, developers can enhance the reliability and maintainability of GraphQL-based APIs, providing a more robust and user-friendly experience for clients.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="user-errors-vs-developer-errors">User Errors vs Developer Errors<a href="#user-errors-vs-developer-errors" class="hash-link" aria-label="Direct link to User Errors vs Developer Errors" title="Direct link to User Errors vs Developer Errors">​</a></h2>
<p>In GraphQL, user errors and developer errors represent different types of issues that can occur during the execution of a GraphQL operation.</p>
<ol>
<li>User Errors:
User errors are typically related to invalid input or requests made by the client. These errors occur when the client provides data that doesn&#x27;t meet the requirements or constraints defined by the GraphQL schema or business logic. For example, if a required field is not provided or an incorrect argument value is passed, a user error may occur. User errors are considered part of the expected flow of the application and are not exceptional or unexpected.</li>
</ol>
<p>Treating user errors as a form of data instead of errors allows for a more flexible and structured way of handling them. Instead of returning a generic error message, GraphQL enables you to provide specific error information along with the response. This allows clients to understand and react to user errors in a meaningful way. By modeling user errors as part of the response, you can provide detailed instructions or suggestions on how to fix the issue, enhancing the overall user experience.</p>
<ol start="2">
<li>Developer Errors:
Developer errors, on the other hand, are exceptional or unexpected issues that occur due to mistakes or bugs in the server-side implementation of the GraphQL API. These errors are not caused by user input but rather by issues with the server, the execution environment, or the logic of the GraphQL server implementation itself. Developer errors could include things like database connection failures, internal server errors, or unhandled exceptions.</li>
</ol>
<p>When developer errors occur, it is crucial to handle them gracefully and provide appropriate error messages or feedback to the client. GraphQL provides a mechanism to represent these errors using the errors field in the response. By including detailed error information, such as error codes or error messages, developers can diagnose and fix the underlying issues efficiently.</p>
<p>In summary, distinguishing between user errors and developer errors in GraphQL allows for a clear separation of concerns. Treating user errors as data instead of generic errors enables better communication between the server and the client, facilitating a more intuitive and user-friendly experience. Developer errors, on the other hand, should be handled and reported in a way that helps developers identify and address issues in the server-side implementation.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="the-solution">The Solution<a href="#the-solution" class="hash-link" aria-label="Direct link to The Solution" title="Direct link to The Solution">​</a></h2>
<p>The guiding philosophy here is that Errors should be considered exceptional. User data should never be represented as an Error. If negative guidance needs to be provided for actions that users can perform, it should be represented in GraphQL as Data rather than as an Error. Errors should exclusively represent developer errors or exceptional circumstances, such as when the database is offline (as highlighted by <a href="https://github.com/graphql/graphql-spec/issues/391#issuecomment-385553207" target="_blank" rel="noopener noreferrer">Lee Byron in comments on the GraphQL-Spec repository</a>).</p>
<p>The Error Handling approach chosen for the Talawa API codebase is based on <a href="https://productionreadygraphql.com/2020-08-01-guide-to-graphql-errors" target="_blank" rel="noopener noreferrer">Marc-Andre Giroux&#x27;s <code>6a</code></a>.</p>
<p>In GraphQL, the majority of &quot;Errors&quot; are actually client-side errors, not server-side errors. For instance, errors like <code>User Not Found</code> or <code>Invalid Login Credentials</code> are not server errors; they are the result of the operation requested by the client. On the other hand, errors like <code>Bad Gateway</code> or <code>Internal Server Error</code> are indeed the server&#x27;s fault.</p>
<p>Therefore, the Talawa API follows the 6a approach (Errors Union List + Interface Contract) to make it easier to send errors along with data, treating client-side errors as results, NOT errors.</p>
<p>By adopting this approach, the Talawa API aims to provide a more refined and user-centric error handling mechanism, distinguishing between client-side and server-side errors while ensuring that user data is consistently represented as data rather than errors.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="when-to-model-errors-in-schema-and-when-not-to">When To Model Errors In Schema And When Not To<a href="#when-to-model-errors-in-schema-and-when-not-to" class="hash-link" aria-label="Direct link to When To Model Errors In Schema And When Not To" title="Direct link to When To Model Errors In Schema And When Not To">​</a></h3>
<p>When deciding whether to model errors in the schema for fields in GraphQL, there are several factors to consider. The decision depends on the nature of the errors, the desired behavior of the API, and the needs of the client applications.</p>
<p>Consider the types of errors that can occur for a particular field. If the errors are specific and can be categorized or have additional metadata associated with them, it might be beneficial to model them in the schema. For example, if a field can return validation errors, authorization errors, or specific business logic errors, modeling them in the schema can provide clients with detailed information about the error type.</p>
<p>But for very basic field validation like checking for nullability for a field , type checking etc you can leave the default GraphQL server as is. There is no benefit for adding extra complexity for these cases.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="cases-where-errors-in-schema-is-recommended">Cases Where Errors in Schema Is Recommended<a href="#cases-where-errors-in-schema-is-recommended" class="hash-link" aria-label="Direct link to Cases Where Errors in Schema Is Recommended" title="Direct link to Cases Where Errors in Schema Is Recommended">​</a></h2>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="the-approach-in-practical-cases">The Approach in Practical Cases<a href="#the-approach-in-practical-cases" class="hash-link" aria-label="Direct link to The Approach in Practical Cases" title="Direct link to The Approach in Practical Cases">​</a></h4>
<p>Let&#x27;s examine how this approach is applied in practical cases:</p>
<ol>
<li>
<p><strong>Multiple Field Level Validation Errors:</strong>
The approach allows sending all field errors at once, enabling clients to customize errors appropriately. For instance, consider a sign-up page where, in case of failed validation for each field, the app screen can display all errors simultaneously under the respective input boxes while also showing the success message for resolved data.</p>
</li>
<li>
<p><strong>Atomic Errors:</strong>
Atomicity in sending errors is achieved by ensuring that in some cases, either Error or Data is sent, not both. This helps maintain clarity and consistency in the response.</p>
</li>
<li>
<p><strong>Nested Resolver Errors (Complex Objects):</strong>
When dealing with relations in the graph sent by the server, each node should be treated individually for its errors. Errors in one node should not directly affect the attributes of other resolved related nodes. This allows for more precise error handling and prevents cascading errors that could impact the entire response.</p>
</li>
<li>
<p><strong>Nested Resolver Errors (Scalar Fields):</strong>
Custom scalar objects, such as Personally Identifiable Information (PII) fields like a user&#x27;s <code>email</code>, may require resolving with a custom resolver, and errors within these fields should not affect other scalar fields. This approach ensures that errors are localized and do not propagate to other parts of the response.</p>
</li>
</ol>
<p>Now, let&#x27;s explore each of these cases with example <code>mutations/queries</code> within the <code>talawa-api</code>. We will analyze both the API and client parts to gain a comprehensive understanding of how this approach is effectively implemented.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="multiple-field-level-validation-errors--">Multiple Field Level Validation Errors -<a href="#multiple-field-level-validation-errors--" class="hash-link" aria-label="Direct link to Multiple Field Level Validation Errors -" title="Direct link to Multiple Field Level Validation Errors -">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="api">API<a href="#api" class="hash-link" aria-label="Direct link to API" title="Direct link to API">​</a></h4>
<p>Field Level Errors describe any errors assisciated with a specific field.</p>
<p>In GraphQL, you can request specific fields from an API, and the API will respond with data for those fields. Field errors can occur when there&#x27;s a problem with one of the fields you&#x27;ve requested.</p>
<p>For example Let us look at the <code>signUp</code> Mutation.</p>
<p>The type definitions relevant for <code>signUp</code> Mutation-&gt;</p>
<div class="language-gql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-gql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  input SignUpInput \{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    firstName: String!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    lastName: String!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    email: EmailAddress!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    password: String!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    appLanguageCode: String</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    organizationUserBelongsToId: ID</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  type AuthData \{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    user: User!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    accessToken: String!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    refreshToken: String!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    androidFirebaseOptions: AndroidFirebaseOptions!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    iosFirebaseOptions: IOSFirebaseOptions!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  type User \{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    tokenVersion: Int!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    _id: ID</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    firstName: String!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    lastName: String!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    email: EmailAddress</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Now, let us delve into the definition of the error union for the <code>signUp</code> mutation.</p>
<p>GraphQL unions provide a mechanism to represent various types of objects in your schema that share common fields. By defining a union, we can compose multiple types, which proves particularly useful when an entity can have multiple types.</p>
<p>In this context, the interface <code>UserError</code> serves as an <code>interface contract</code>. The precise significance of this interface will become evident as we progress to the client-side explanation section.</p>
<div class="language-gql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-gql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// now begins the Error unions types, we can consume many error types in this</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">union SignUpError = EmailTaken | PasswordTooShort | UserError</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">type EmailTaken implements UserError \{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  message: String!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  path: String!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  suggestion: String!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">type PasswordTooShort implements UserError \{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  message: String!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  path: String!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  minimumLength: Int!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">interface UserError \{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  message: String!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  path: String!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>As you can see the <code>signUp</code> mutation has a return type of <code>SignUpResult!</code> which in turn contains <code>signUpData</code> with the return type <code>AuthData</code> and <code>signUpErrors</code> with return type of an array of the <code>SignUpError</code> union. This way the <code>signUp</code> mutation returns both the actual relevant data and the errors as result.</p>
<div class="language-gql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-gql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// Here is the return type of signup mutation  notice how the signUpData is nullable here, well that is optional.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">type SignUpResult \{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    signUpData : AuthData ,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    signUpErrors : [SignUpError!]!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">type Mutation \{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   signUp(input: SignUpInput!): SignUpResult!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Let us look at the pseudo code for the resolver now.</p>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> resolvers </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> \</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">Mutation</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> \</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function-variable function" style="color:#d73a49">signUp</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">parent</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> args</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> context</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> \</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token comment" style="color:#999988;font-style:italic">//the general approach of how this would work.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">           userObj </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> \</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">           signUpErrors </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">           </span><span class="token function maybe-class-name" style="color:#d73a49">If</span><span class="token punctuation" style="color:#393A34">(</span><span class="token constant" style="color:#36acaa">CHECK</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">DUPLICATION</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">OF</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">EMAIL</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> \</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                 </span><span class="token constant" style="color:#36acaa">KEEP</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">THE</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">EMAIL</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">FIELD</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">OF</span><span class="token plain">  </span><span class="token constant" style="color:#36acaa">USEROBJ</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">TO</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">BE</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">RETURNED</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">AS</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">NULL</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                 signUpErrors</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">push</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">\</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                      </span><span class="token literal-property property" style="color:#36acaa">__typename</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;EmailTaken&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        </span><span class="token literal-property property" style="color:#36acaa">message</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Email is already taken&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        </span><span class="token literal-property property" style="color:#36acaa">path</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;UserInput.email&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        </span><span class="token literal-property property" style="color:#36acaa">suggestion</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string string" style="color:#e3116c">Try to provide a unique mail or make sure you have not created an account </span><br></span><span class="token-line" style="color:#393A34"><span class="token template-string string" style="color:#e3116c">                        already</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                 </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">           </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">           </span><span class="token function maybe-class-name" style="color:#d73a49">If</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token constant" style="color:#36acaa">CHECK</span><span class="token plain"> args</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">PASSWORD</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">LENGTH</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> \</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                   signUpErrors</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">push</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">\</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                      </span><span class="token literal-property property" style="color:#36acaa">__typename</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;PasswordTooShort&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        </span><span class="token literal-property property" style="color:#36acaa">message</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Password length is too short&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        </span><span class="token literal-property property" style="color:#36acaa">path</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;UserInput.password&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        </span><span class="token literal-property property" style="color:#36acaa">minimumLength</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                   </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">           </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">           </span><span class="token comment" style="color:#999988;font-style:italic">// Approach when we need to fall on a general error based on the interface contract `UserError`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">           </span><span class="token function maybe-class-name" style="color:#d73a49">If</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token constant" style="color:#36acaa">CERTAIN</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">CHECK</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">WHERE</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">WE</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">WOULD</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">NEED</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">TO</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">ADD</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">THAT</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">ERROR</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">IN</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">THE</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  signUpErrors </span><span class="token constant" style="color:#36acaa">ARRAY</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> \</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    signUpErrors</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">push</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">\</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            </span><span class="token literal-property property" style="color:#36acaa">__typename</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">&quot;UserError&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            </span><span class="token literal-property property" style="color:#36acaa">message</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;message&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            </span><span class="token literal-property property" style="color:#36acaa">path</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;path&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token comment" style="color:#999988;font-style:italic">// Here we will be returning multiple errors in the form on an array of signUpErrors</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token constant" style="color:#36acaa">IF</span><span class="token plain"> signUpErrors </span><span class="token constant" style="color:#36acaa">IS</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">NOT</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">EMPTY</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> \</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain">  \</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                   </span><span class="token literal-property property" style="color:#36acaa">signUpData</span><span class="token operator" style="color:#393A34">:</span><span class="token keyword null nil" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                   signUpErrors</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token constant" style="color:#36acaa">EVERYTHING</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">IS</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">OKAY</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">CREATE</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">THE</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">USER</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">IN</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">DB</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token maybe-class-name">CreatedUserObj</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">DB</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">CREATE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token constant" style="color:#36acaa">USER</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain">  \</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                   </span><span class="token literal-property property" style="color:#36acaa">signUpData</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> \</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                         </span><span class="token literal-property property" style="color:#36acaa">user</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">CreatedUserObj</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                          </span><span class="token spread operator" style="color:#393A34">...</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"> </span><span class="token property-access">other</span><span class="token plain"> </span><span class="token maybe-class-name">AuthData</span><span class="token plain"> fields</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                   </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                   signUpErrors</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">           </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>In this approach for resolving Field Errors, two significant features are highlighted:</p>
<ol>
<li>
<p><strong>Multiple Errors Handling:</strong>
The approach allows for sending multiple errors back to the client when necessary. This capability proves beneficial when client applications need to display those errors concurrently with relevant UI elements. By providing multiple errors, the client can obtain a comprehensive view of the issues encountered during the field resolution process.</p>
</li>
<li>
<p><strong>General Purpose Interface Contract - UserError:</strong>
To cater to scenarios where a general-purpose error needs to be sent back to the client, the approach employs a versatile interface contract called <code>UserError</code>. This interface acts as a fallback mechanism, ensuring that clients receive informative error messages even in cases where specific error types are not applicable. It enhances error handling and communication between the server and client, offering a consistent and user-friendly experience.</p>
</li>
</ol>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="client">Client<a href="#client" class="hash-link" aria-label="Direct link to Client" title="Direct link to Client">​</a></h4>
<p>Let us take a look at how the clients would be making this query.</p>
<div class="language-gql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-gql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">mutation \{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  signUp(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    input: \{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      firstName: &quot;Harry&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      lastName: &quot;Potter&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      email: &quot;someDuplicateEmail&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      password: &quot;12345&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ) \{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    signUpData \{ </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      user: \{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        _id,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        firstName,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        lastName,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        email</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      } ,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      accessToken,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      refreshToken</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    signUpErrors \{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      # Specific cases</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ... on EmailTaken \{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        __typename</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        message</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        path</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        suggestion</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ... on PasswordTooShort \{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        __typename</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        message</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        path</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        minimumLength</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      # Interface contract to handle general purpose Error</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ... on UserError \{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        message</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        path</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>As evident from this mutation input, the subsequent mutation should lead to the occurrence of the <code>EmailTaken</code> and <code>PasswordTooShort</code> Errors, as dictated by our resolver.</p>
<p>The inclusion of the <code>UserError</code> interface allows for the handling of any general-purpose error, granting us the advantage of an extensible interface coupled with the expressive nature of the union. This combination provides a flexible error-handling approach, enabling seamless communication between the server and client.</p>
<p>Consequently, the response resulting from this mutation will resemble the following structure:</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">\{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;data&quot;: \{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;signUpData&quot;: null,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;signUpErrors&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      \{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;__typename&quot;: &quot;EmailTaken&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;message&quot;: &quot;Email is already taken&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;path&quot;: &quot;UserInput.email&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;suggestion&quot;: &quot;Try to provide a unique mail or sure you have not created an account already&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      \{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;__typename&quot;: &quot;PasswordTooShort&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;message&quot;: &quot;Password length is too short&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;path&quot;: &quot;UserInput.password&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;minimumLength&quot;: 8</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>As observed,</p>
<ol>
<li>
<p>The <code>signUpErrors</code> section comprises the anticipated errors, which are typesafe and accompanied by custom error messages. This robust error-handling approach ensures that clients receive meaningful and precise information about encountered issues.</p>
</li>
<li>
<p>The <code>user</code> field is null in this instance because the operation encountered a failure, preventing the creation of a user object in the database. This outcome aligns with the expected behavior, and the response accurately reflects the result of the operation.</p>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="atomic-errors--">Atomic Errors -<a href="#atomic-errors--" class="hash-link" aria-label="Direct link to Atomic Errors -" title="Direct link to Atomic Errors -">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="api-1">API<a href="#api-1" class="hash-link" aria-label="Direct link to API" title="Direct link to API">​</a></h4>
<p>Field Level Errors describe any errors assisciated with a specific field.</p>
<p>In GraphQL, you can request specific fields from an API, and the API will respond with data for those fields. Field errors can occur when there&#x27;s a problem with one of the fields you&#x27;ve requested.</p>
<p>For example Let us look at a hypothetical <code>login</code> Mutation.</p>
<p>The type definitions relevant for <code>login</code> Mutation-&gt;</p>
<div class="language-gql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-gql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  type User \{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    _id: ID!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name: String!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    email: String!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    joinedOrganization: Organization</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    image: Image!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  type Organization \{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name: String!,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    description: String!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  type Image \{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    filepath: String!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    size: Int!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  type LoginPayload \{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    authtoken: String!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    user: User!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  input LoginInput \{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    email: EmailAddress!,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    password: String!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  type Mutation \{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    login(input: LoginInput!): LoginPayload!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Now, let us take a look at the definition of error union for the <code>login</code> mutation.</p>
<p>GraphQL unions are a way to represent different types of objects in your schema that share some common fields. A union is a composition of multiple types and is useful when we require type definition for an entity that could have multiple types</p>
<p>The interface <code>UserError</code> will act as an <code>interface contract</code>. The exact purpose for it will be cleared when we reach the  client side explaination part.</p>
<div class="language-gql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-gql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># the Error unions types, we can consume many error types in this</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  union LoginError = EmailNotFound | PasswordInvalid | UserError</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  interface UserError \{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    message: String!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    path: String!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  type EmailNotFound implements UserError \{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    message: String!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    path: String!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  type PasswordInvalid implements UserError \{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    message: String!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    path: String!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The <code>login</code> mutation has a return type of <code>LoginResult!</code> which in turn contains <code>loginPayload</code> and <code>loginErrors</code> with return type of an array of the <code>LoginError</code> union. This way the <code>login</code> mutation returns both the actual relevant data and the errors as result.</p>
<div class="language-gql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-gql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Here is the return type of login mutation.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  type LoginResult \{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    loginPayload: LoginPayload</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    loginError: [LoginError!]!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  type Mutation \{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    login(input: LoginInput!): LoginResult!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Let us look at the pseudo code for the resolvers now. Right now let us just focus on the login resolver. In both cases of Atomic Errors that is <code>UserNotFound</code> and <code>InvalidPassword</code> the <code>loginPayload</code> field returns null whereas the <code>loginErrors</code> field returns said errors. For other non-atomic errors which are not &quot;failing errors&quot;, can be sent as an array directly along with the User in the db and accesstoken.</p>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> resolvers </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> \</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">Mutation</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> \</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function-variable function" style="color:#d73a49">login</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter literal-property property" style="color:#36acaa">parent</span><span class="token parameter operator" style="color:#393A34">:</span><span class="token parameter"> any</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> </span><span class="token parameter literal-property property" style="color:#36acaa">args</span><span class="token parameter operator" style="color:#393A34">:</span><span class="token parameter"> \</span><span class="token parameter punctuation" style="color:#393A34">{</span><span class="token parameter"> </span><span class="token parameter literal-property property" style="color:#36acaa">input</span><span class="token parameter operator" style="color:#393A34">:</span><span class="token parameter"> </span><span class="token parameter maybe-class-name">LoginInput</span><span class="token parameter"> </span><span class="token parameter punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> \</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> \</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> email</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> password </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> args</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">input</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      userObj </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> \</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      loginErrors </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token constant" style="color:#36acaa">IF</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">USER</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">WITH</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">EMAIL</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">DOES</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">NOT</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">EXIST</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> \</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        loginErrors</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">push</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">\</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token literal-property property" style="color:#36acaa">__typename</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;EmailNotFound&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token literal-property property" style="color:#36acaa">message</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;User with Email does not exist&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token literal-property property" style="color:#36acaa">path</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;LoginInput.email&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> \</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token literal-property property" style="color:#36acaa">loginPayload</span><span class="token operator" style="color:#393A34">:</span><span class="token keyword null nil" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          loginErrors</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token constant" style="color:#36acaa">IF</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">PASSWORDS</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">DOES</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">NOT</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">MATCH</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> \</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        loginErrors</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">push</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">\</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token literal-property property" style="color:#36acaa">__typename</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;PasswordInvalid&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token literal-property property" style="color:#36acaa">message</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Passwords do not match&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token literal-property property" style="color:#36acaa">path</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;LoginInput.password&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> \</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token literal-property property" style="color:#36acaa">loginPayload</span><span class="token operator" style="color:#393A34">:</span><span class="token keyword null nil" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          loginErrors</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      userObj </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">DB</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">FIND</span><span class="token punctuation" style="color:#393A34">(</span><span class="token constant" style="color:#36acaa">USER</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">WITH</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">EMAIL</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">AND</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">PASSWORD</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      accessToken </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">GENERATE</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">AND</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">SAVE</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">ACCESS</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">TOKEN</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token constant" style="color:#36acaa">IF</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">ANY</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">OTHER</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">ERRORS</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">\</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token constant" style="color:#36acaa">FOR</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">EACH</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">ERROR</span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        loginErrors</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">push</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">\</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token literal-property property" style="color:#36acaa">__typename</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;UserError&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token literal-property property" style="color:#36acaa">message</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;message&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token literal-property property" style="color:#36acaa">path</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;PATH&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> \</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token literal-property property" style="color:#36acaa">loginPayload</span><span class="token operator" style="color:#393A34">:</span><span class="token plain">\</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          userObj</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          accessToken</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        loginErrors</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// We will expand more into this later in the documentation.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">User</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> \</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function-variable function" style="color:#d73a49">email</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter literal-property property" style="color:#36acaa">parent</span><span class="token parameter operator" style="color:#393A34">:</span><span class="token parameter"> \</span><span class="token parameter punctuation" style="color:#393A34">{</span><span class="token parameter"> </span><span class="token parameter literal-property property" style="color:#36acaa">email</span><span class="token parameter operator" style="color:#393A34">:</span><span class="token parameter"> string </span><span class="token parameter punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> \</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">// Logic to restrict PII access to email field</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token constant" style="color:#36acaa">IF</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">REQUESTING</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">USER</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">IS</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">NOT</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">AUTHORISED</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">TO</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">VIEW</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">THE</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">EMAIL</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">OF</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">SAID</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">USER</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> \</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;********&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// return ENCRYPTED email value  </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> email</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function-variable function" style="color:#d73a49">joinedOrganization</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter literal-property property" style="color:#36acaa">parent</span><span class="token parameter operator" style="color:#393A34">:</span><span class="token parameter"> \</span><span class="token parameter punctuation" style="color:#393A34">{</span><span class="token parameter"> </span><span class="token parameter literal-property property" style="color:#36acaa">joinedOrganization</span><span class="token parameter operator" style="color:#393A34">:</span><span class="token parameter"> </span><span class="token parameter maybe-class-name">Organization</span><span class="token parameter"> </span><span class="token parameter punctuation" style="color:#393A34">}</span><span class="token parameter"> </span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> args </span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> context</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> \</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">// Logic to retrieve joined organization data</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">// You can fetch organization data from a database or another source</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token constant" style="color:#36acaa">IF</span><span class="token plain"> context</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">userID</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">IS</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">NOT</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">AUTHORISED</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">TO</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">VIEW</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">THE</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">JOINED</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">ORGANIZATION</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">OF</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">THE</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">REQUESTED</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">USER</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">\</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token keyword null nil" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> organization</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>In this approach for resolving Field Errors -&gt;</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="client-1">Client<a href="#client-1" class="hash-link" aria-label="Direct link to Client" title="Direct link to Client">​</a></h4>
<p>Let us take a look at how the clients would be making this query.</p>
<div class="language-gql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-gql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">mutation \{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  login(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    input: \{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      email: &quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      password: &quot;12345&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ) ... on LoginPayload \{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      authtoken</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      # Right now let&#x27;s just focus on the the fields which will not require a custom scalar unlike `email` or `joinedOrganization`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      user \{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        _id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        image \{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          filepath</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          size</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ... on LoginError \{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      __typename</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ... on EmailNotFound \{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        message</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ... on InvalidPassword \{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        message</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ... on IsPasswordValid \{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        message</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>In this client-side query, we use the ... operator to fragment the result based on the type name in the LoginResult union. This allows us to specify the fields to be selected for each possible type within the union.</p>
<p>For the LoginPayload type, we select the authtoken field and the fields for the User type, including _id and image.</p>
<p>For the LoginError type, we select the __typename field to identify the specific error type within the union. We then use the ... on syntax to specify the fields for each error type (EmailNotFound, InvalidPassword, IsPasswordValid) implementing the UserError interface. In this example, we only select the message field for each error type.</p>
<p>By using fragment spreading, we can handle different types within the LoginResult union and select the appropriate fields accordingly.</p>
<p>Here&#x27;s how the response would look like for different error scenarios:</p>
<ol>
<li>If a user with the provided email does not exist:</li>
</ol>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">\{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;data&quot;: \{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;login&quot;: \{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;loginPayload&quot;: null,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;loginErrors&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        \{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;__typename&quot;: &quot;EmailNotFound&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;message&quot;: &quot;User with Email does not exist&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;path&quot;: &quot;LoginInput.email&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ol start="2">
<li>If the provided password is invalid:</li>
</ol>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">\{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;data&quot;: \{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;login&quot;: \{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;loginPayload&quot;: null,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;loginErrors&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        \{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;__typename&quot;: &quot;PasswordInvalid&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;message&quot;: &quot;Passwords do not match&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;path&quot;: &quot;LoginInput.password&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ol start="3">
<li>If there are other unspecified errors in the loginErrors array:</li>
</ol>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">\{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;data&quot;: \{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;login&quot;: \{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;loginPayload&quot;: null,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;loginErrors&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        \{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;__typename&quot;: &quot;UserError&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;message&quot;: &quot;Some error message&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;path&quot;: &quot;Some path&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        \{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;__typename&quot;: &quot;UserError&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;message&quot;: &quot;Another error message&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;path&quot;: &quot;Another path&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>In each case, the loginPayload field is set to null since the login was unsuccessful. The loginErrors field contains an array of error objects, where each object includes the __typename to identify the specific error type, the error message, and the path where the error occurred.</p>
<p>Please note that the actual error handling and response structure may vary depending on your implementation and the GraphQL client library or framework you are using. The provided examples illustrate the general structure of the response for different error scenarios.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="nested-resolver-errors-complex-objects">Nested Resolver Errors. (Complex Objects)<a href="#nested-resolver-errors-complex-objects" class="hash-link" aria-label="Direct link to Nested Resolver Errors. (Complex Objects)" title="Direct link to Nested Resolver Errors. (Complex Objects)">​</a></h3>
<p><strong>Make sure you are completely thorough with the above two sections before proceeding further.</strong></p>
<p>To understand nested resolvers in terms of graph nomenclature, it&#x27;s helpful to think of GraphQL schemas as directed graphs, where the types are nodes and the fields are edges. Each field in the schema has a resolver associated with it, which determines how the data for that field should be retrieved.</p>
<p>When a GraphQL query is executed, the resolver for the root field is called first, and then the resolvers for any nested fields are called recursively. This process continues until all of the fields in the query have been resolved.</p>
<p>Overall, nested resolvers are an important concept in GraphQL because they allow you to retrieve complex data structures in a flexible and efficient way, while keeping your schema simple and easy to understand.</p>
<p>As such we will also need to make sure Errors in one node should not break the entire query.</p>
<p>Let&#x27;s First make a small adjustment to our Schema and Resolvers,</p>
<div class="language-gql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-gql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  type Organization \{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name: String!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    description: String!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  interface OrganizationError \{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    message: String!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    path: String!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  type UnauthorizedError implements OrganizationError \{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    message: String!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    path: String!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  union OrganizationErrors = UnauthorizedError | OrganizationError</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  type OrganizationResult \{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    organizationPayload: Organization</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    organizationErrors: [OrganizationErrors!]!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  type User \{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    _id: ID!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    email: String!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    joinedOrganization: OrganizationResult!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    image: Image!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><code>OrganizationErrors</code>: It represents the possible types of errors that can occur related to organizations.
It includes the <code>UnauthorizedError</code> type, which represents an unauthorized error related to organizations.
It can also include other types that implement the <code>OrganizationError</code> interface.
The <code>OrganizationErrors</code> union allows for flexibility in handling different types of errors that can occur in operations related to organizations. It ensures that the result can contain the appropriate error type within the union.</p>
<p>Certainly! Here&#x27;s an explanation of the <code>OrganizationResult</code> type:</p>
<p>The <code>OrganizationResult</code> type represents the result of an operation related to organizations. It consists of two fields: <code>organizationPayload</code> and <code>organizationErrors</code>.
The <code>organizationPayload</code> field contains the payload for the operation, which includes the <code>name</code> and <code>description</code> of the organization. This field represents the successful result of the operation, providing the organization data.
The <code>organizationErrors</code> field is a list of errors that occurred during the operation. It can include various types of errors, such as the <code>UnauthorizedError</code> type or other types that implement the <code>OrganizationError</code> interface.
This field allows for proper error handling and provides details about any issues encountered during the organization-related operation. The <code>OrganizationResult</code> type ensures that both successful results and errors are properly represented and returned in a consistent manner.</p>
<p>Let&#x27;s Modify the nested resolver for <code>joinedOrganization</code></p>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> resolver  </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> \</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token literal-property property" style="color:#36acaa">Mutation</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> \</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function-variable function" style="color:#d73a49">login</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter literal-property property" style="color:#36acaa">parent</span><span class="token parameter operator" style="color:#393A34">:</span><span class="token parameter"> any</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> </span><span class="token parameter literal-property property" style="color:#36acaa">args</span><span class="token parameter operator" style="color:#393A34">:</span><span class="token parameter"> \</span><span class="token parameter punctuation" style="color:#393A34">{</span><span class="token parameter"> </span><span class="token parameter literal-property property" style="color:#36acaa">input</span><span class="token parameter operator" style="color:#393A34">:</span><span class="token parameter"> </span><span class="token parameter maybe-class-name">LoginInput</span><span class="token parameter"> </span><span class="token parameter punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> \</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// Implementation of the login mutation resolver</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">User</span><span class="token operator" style="color:#393A34">:</span><span class="token plain">\</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function-variable function" style="color:#d73a49">email</span><span class="token operator" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter literal-property property" style="color:#36acaa">parent</span><span class="token parameter operator" style="color:#393A34">:</span><span class="token parameter maybe-class-name">User</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain">\</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">// Implementation of the email resolver which will be explained later</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function-variable function" style="color:#d73a49">joinedOrganization</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter literal-property property" style="color:#36acaa">parent</span><span class="token parameter operator" style="color:#393A34">:</span><span class="token parameter"> </span><span class="token parameter maybe-class-name">User</span><span class="token parameter"> </span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> args </span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> context</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> \</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">// Logic to retrieve joined organization data</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token constant" style="color:#36acaa">IF</span><span class="token plain"> parent</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">_id</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">IS</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">PRIVATE</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">AND</span><span class="token plain"> context</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">userID</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">IS</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">UNAUTHORISED</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">TO</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">ACCESS</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">THE</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">DATA</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">OF</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">THE</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">REQUESTED</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">USER</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> \</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> unauthorizedError </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> \</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token literal-property property" style="color:#36acaa">__typename</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;UnauthorizedError&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token literal-property property" style="color:#36acaa">message</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;Unauthorized&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token literal-property property" style="color:#36acaa">path</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;User.joinedOrganization&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> \</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token literal-property property" style="color:#36acaa">organizationPayload</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword null nil" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token literal-property property" style="color:#36acaa">organizationErrors</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">unauthorizedError</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token constant" style="color:#36acaa">ANY</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">OTHER</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">ERROR</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> \</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> organizationError </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> \</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token literal-property property" style="color:#36acaa">__typename</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;OrganizationError&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token literal-property property" style="color:#36acaa">message</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;Unauthorized&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token literal-property property" style="color:#36acaa">path</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;User.joinedOrganization&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> \</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token literal-property property" style="color:#36acaa">organizationPayload</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword null nil" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token literal-property property" style="color:#36acaa">organizationErrors</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">organizationError</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> \</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token literal-property property" style="color:#36acaa">organizationPayload</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> organization</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token literal-property property" style="color:#36acaa">organizationErrors</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>In this updated resolver, the joinedOrganization field resolver for the User type includes the additional logic to check if the requesting user is authorized to access the data of the requested user. If the conditions are met, it returns the organization data within the organizationPayload field. If not authorized, it returns an UnauthorizedError within the organizationErrors field.</p>
<div class="language-gql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-gql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">mutation Login($input: LoginInput!) \{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  login(input: $input) \{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    loginPayload \{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      authtoken</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      user \{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        _id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        email</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        joinedOrganization \{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            organizationPayload \{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              ... on Organization \{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                description</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            organizationErrors \{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              __typename</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              ... on UnauthorizedError \{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                message</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                path</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              ... on OrganizationError \{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                message</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                path</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    loginErrors \{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      __typename</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ... on EmailNotFound \{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        message</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        path</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ... on PasswordInvalid \{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        message</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        path</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ... on IsPasswordValid \{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        message</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        path</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The <code>joinedOrganization</code> field is a nested field within the <code>login</code> mutation. It represents the organization-related data for the logged-in user. It is accessed within the <code>user</code> field, which is part of the <code>loginPayload</code> field.</p>
<p>Within the <code>joinedOrganization</code> field, there are two possible selections: <code>organizationPayload</code> and <code>organizationErrors</code>. The <code>organizationPayload</code> field represents the successful result of the joined organization data retrieval. It includes the <code>name</code> and <code>description</code> fields, which provide information about the joined organization.</p>
<p>The <code>organizationErrors</code> field is a list of errors that can occur during the joined organization data retrieval. It includes the <code>__typename</code>, <code>message</code>, and <code>path</code> fields. Specifically, it includes the <code>UnauthorizedError</code> type, which represents an unauthorized error related to accessing the joined organization. Additionally, it includes any other types that implement the <code>OrganizationError</code> interface, providing further details about potential errors.</p>
<p>By including both the <code>organizationPayload</code> and <code>organizationErrors</code> fields within the <code>joinedOrganization</code> field, this query allows for handling both successful results and any errors that may occur during the joined organization data retrieval.</p>
<p>Here&#x27;s an example of a response from Apollo Server for a query that represents a successful login but unauthorized access to the <code>joinedOrganization</code>:</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">\{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;data&quot;: \{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;login&quot;: \{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;loginPayload&quot;: \{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;authtoken&quot;: &quot;abc123&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;user&quot;: \{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;_id&quot;: &quot;123&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;email&quot;: &quot;example@example.com&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;joinedOrganization&quot;: \{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;organizationPayload&quot;: null,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;organizationErrors&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              \{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &quot;__typename&quot;: &quot;UnauthorizedError&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &quot;message&quot;: &quot;Unauthorized access to joined organization&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &quot;path&quot;: &quot;User.joinedOrganization&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;loginErrors&quot;: null</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>In this response, the <code>login</code> mutation was successful, resulting in a valid authentication token (<code>authtoken</code>). The <code>user</code> field represents the logged-in user, with an <code>_id</code> and <code>email</code>. However, when attempting to access the <code>joinedOrganization</code>, the response indicates that it is unauthorized. The <code>organizationPayload</code> is set to <code>null</code>, indicating that no organization data was returned. Instead, the <code>organizationErrors</code> field contains an error object with the <code>__typename</code> of <code>UnauthorizedError</code>, along with the <code>message</code> and <code>path</code> fields providing information about the unauthorized access to the joined organization.</p>
<p>This response structure allows the client to handle both successful results and potential errors, such as unauthorized access to certain resources, in a standardized manner.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="nested-resolvers-errors-scalar-fields">Nested Resolvers Errors (Scalar Fields)<a href="#nested-resolvers-errors-scalar-fields" class="hash-link" aria-label="Direct link to Nested Resolvers Errors (Scalar Fields)" title="Direct link to Nested Resolvers Errors (Scalar Fields)">​</a></h3>
<p>In GraphQL, a scalar field resolver is a resolver function that is responsible for resolving the value of a scalar field. A scalar field is a field that has a scalar type, such as a <code>String</code>, <code>Int</code>, or <code>Boolean</code> or any other Custom Scalar type.</p>
<p>In Graphql Server, resolving fields is done using resolver functions. Resolver functions are responsible for fetching the data for a field, and they are defined in the resolver map, which maps the types and fields in the schema to their respective resolver functions.</p>
<p>When a GraphQL query is received by the server, Graphql Server parses the query and traverses the schema to determine which resolver functions need to be called to resolve the requested fields. For each field in the query, Graphql Server calls the resolver function associated with that field to fetch the data.</p>
<p>Resolver functions can be synchronous or asynchronous, and they can return the data for the field directly, or they can return a Promise that resolves to the data. If a resolver function returns a Promise, Graphql Server will wait for the Promise to resolve before continuing to resolve other fields.</p>
<p>Nested scalar field resolvers in GraphQL are resolver functions that are used to resolve the value of scalar fields that are nested within other fields. For example, consider a <code>User</code> type. Here, the <code>email</code> field is a PII (Personal Identifiable Information) field and would be encrypted at rest and in transit and thus need to be resolved with its own custom resolver.</p>
<p>We would need to resolve that field seperately when we are fetching a user and treat its errors like it is a nested resolver.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="api-2">API<a href="#api-2" class="hash-link" aria-label="Direct link to API" title="Direct link to API">​</a></h4>
<div class="language-gql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-gql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">type EmailAdressResult \{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  emailData:EmailAddress,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  emailErrors:[EmailErrors!].</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">union EmailErrors = PIIError | AccessControlError</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">type PIIError implements AccessControlError \{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  message: String!,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  authorisedRole: String!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">interface AccessControlError \{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  message: String!,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  authorisedRole: String!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">type User \{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    _id: ID!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    email: EmailAdressResult!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    joinedOrganization: OrganizationResult!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    image: Image!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Now let&#x27;s take a look at their <code>user</code> query  resolver types -&gt;</p>
<div class="language-gql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-gql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">type UserResult \{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    userData: User ,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    userErrors: [UserError!]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">type Query \{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   user(id: ID!): UserResult!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>And now finally take a look at their resolvers -&gt;</p>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> resolver  </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> \</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token literal-property property" style="color:#36acaa">Mutation</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> \</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function-variable function" style="color:#d73a49">login</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter literal-property property" style="color:#36acaa">parent</span><span class="token parameter operator" style="color:#393A34">:</span><span class="token parameter"> any</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> </span><span class="token parameter literal-property property" style="color:#36acaa">args</span><span class="token parameter operator" style="color:#393A34">:</span><span class="token parameter"> \</span><span class="token parameter punctuation" style="color:#393A34">{</span><span class="token parameter"> </span><span class="token parameter literal-property property" style="color:#36acaa">input</span><span class="token parameter operator" style="color:#393A34">:</span><span class="token parameter"> </span><span class="token parameter maybe-class-name">LoginInput</span><span class="token parameter"> </span><span class="token parameter punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> \</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// Implementation of the login mutation resolver</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">User</span><span class="token operator" style="color:#393A34">:</span><span class="token plain">\</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function-variable function" style="color:#d73a49">email</span><span class="token operator" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter literal-property property" style="color:#36acaa">parent</span><span class="token parameter operator" style="color:#393A34">:</span><span class="token parameter maybe-class-name">User</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain">\</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> email </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> parent</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">email</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> emailError</span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token constant" style="color:#36acaa">NOT</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">AUTHRORISED</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">TO</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">VIEW</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">PII</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">OF</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">PARENT</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">USER</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> \</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        emailErrors</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">push</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">\</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token literal-property property" style="color:#36acaa">__typename</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;PIIError&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token literal-property property" style="color:#36acaa">message</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Cannout access this info&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token literal-property property" style="color:#36acaa">authorisedRole</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Authorised roles are : ...&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> \</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token literal-property property" style="color:#36acaa">emailData</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">!</span><span class="token plain">emailErrors </span><span class="token operator" style="color:#393A34">?</span><span class="token plain"> email </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">encrypted</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">email</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token literal-property property" style="color:#36acaa">emailErrors</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> emailErrors</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function-variable function" style="color:#d73a49">joinedOrganization</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter literal-property property" style="color:#36acaa">parent</span><span class="token parameter operator" style="color:#393A34">:</span><span class="token parameter"> </span><span class="token parameter maybe-class-name">User</span><span class="token parameter"> </span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> args </span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> context</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> \</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">// Implementation of the joinedOrganization resolver</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The <code>email</code> resolver checks if the requesting user is authorized to access the email information of the parent user. If unauthorized, it adds a <code>PIIError</code> object to the <code>emailErrors</code> array. Otherwise, it returns the email information (<code>emailData</code>) and any errors (<code>emailErrors</code>) within an object. This resolver allows for controlled access to sensitive email information based on authorization rules, returning the data or appropriate errors accordingly.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="client-2">Client<a href="#client-2" class="hash-link" aria-label="Direct link to Client" title="Direct link to Client">​</a></h4>
<p>If the query is made to access an email of another user like this -&gt;</p>
<div class="language-gql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-gql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">#Here the requesting user i.e context.user has an id of 1 </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mutation Login($input: LoginInput!) \{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  login(input: $input) \{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    loginPayload \{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      authtoken</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      user \{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        _id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        email \{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          emailData</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          emailErrors \{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            __typename</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ... on PIIError \{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              message</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              authorisedRole</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        joinedOrganization \{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            organizationPayload \{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              ... on Organization \{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                description</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            organizationErrors \{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              __typename</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              ... on UnauthorizedError \{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                message</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                path</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              ... on OrganizationError \{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                message</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                path</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    loginErrors \{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      __typename</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ... on EmailNotFound \{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        message</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        path</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ... on PasswordInvalid \{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        message</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        path</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ... on IsPasswordValid \{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        message</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        path</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Since here the context user is not allowed to access the email field the returned response is something like this -&gt;</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">\{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;data&quot;: \{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;login&quot;: \{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;loginPayload&quot;: \{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;authtoken&quot;: &quot;abc123&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;user&quot;: \{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;_id&quot;: &quot;123&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;email&quot;: \{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;emailData&quot;: null,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;emailErrors&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              \{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &quot;__typename&quot;: &quot;PIIError&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &quot;message&quot;: &quot;Unauthorized access to email&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &quot;authorisedRole&quot;: &quot;Admin&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;joinedOrganization&quot;: \{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;organizationPayload&quot;: \{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              &quot;name&quot;: &quot;Example Organization&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              &quot;description&quot;: &quot;Organization description&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;organizationErrors&quot;: null</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;loginErrors&quot;: null</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Certainly! Here&#x27;s a concise explanation of the response in case of a PII error in the <code>email</code> field, along with all other queries running successfully:</p>
<p>The response includes a <code>loginPayload</code> with an authentication token and a <code>user</code> object containing various fields. The <code>email</code> field within the <code>user</code> object has an <code>emailData</code> field set to <code>null</code> due to unauthorized access. The <code>emailErrors</code> field contains an array with a single <code>PIIError</code> object, indicating the unauthorized access to the email. The <code>PIIError</code> object provides the error <code>message</code> and specifies the required <code>authorisedRole</code> for access. The <code>joinedOrganization</code> field returns the organization data within the <code>organizationPayload</code> field, while the <code>organizationErrors</code> field is set to <code>null</code>, indicating no errors. Additionally, the <code>loginErrors</code> field is <code>null</code>, indicating no errors for other queries. This response structure enables handling both successful results and potential errors, ensuring appropriate communication of the PII error in the <code>email</code> field.</p>
<p>Since some scalar fields are database intensive to compute within their own custom resolver and because there are not a lot of fields which can fall under &quot;scalars which need Access Control Logic seperately&quot; it is okay to have this approach.</p>
<p><strong>Note :</strong></p>
<p>The purpose of nested resolvers is not &quot;magic&quot;, but rather to help organize code and maintain a clean architecture. They are necessary for delegating the computation of expensive or custom fields that only exist at the GraphQL level and not in the database. For instance, <code>email</code> is an excellent example of such a field. Other examples include bank <code>accountNumber</code>, <code>bankBalance</code>, <code>phoneNumber</code> (which have some kind of access control logic assiciated with them), and <code>postCount</code> or <code>joinedOrganizationsCount</code> which are not defined explicitly in the database. By using nested resolvers, we can delegate these operations to the appropriate location and ensure proper organization and maintenance of the code.</p>
<p>When resolving custom or complex fields within the parent resolver, it is possible to return errors related to those fields within the errors field of that parent resolver. While it is technically feasible to resolve an entire GraphQL schema and all related fields within a single resolver, doing so is not in accordance with GraphQL best practices. This approach differs from the root errors approach in that errors are type-safe, whereas in the root errors list they are not. However, when resolving errors for all fields or nested fields within the parent resolver, a long list of possible errors may result.</p>
<p>Adopting a modular approach by extracting data and errors into resolvers can help isolate information to specific fields&#x27; resolvers, whether they are for scalar or complex objects. However, this may lead to the GraphQL schema not directly representing relations. As a result, many fields (scalar or complex) may have {success,errors} objects, which can appear peculiar.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="errors-defined-in-schema-approach-vs-default-graphql-errors">Errors Defined in Schema Approach vs Default GraphQL Errors<a href="#errors-defined-in-schema-approach-vs-default-graphql-errors" class="hash-link" aria-label="Direct link to Errors Defined in Schema Approach vs Default GraphQL Errors" title="Direct link to Errors Defined in Schema Approach vs Default GraphQL Errors">​</a></h2>
<p>When it comes to error handling in GraphQL, there are two main approaches: errors defined in the schema and default GraphQL errors. Each approach has its own tradeoffs. Let&#x27;s compare them in the table below:</p>
<table><thead><tr><th></th><th>Errors Defined in Schema Approach</th><th>Default GraphQL Errors</th></tr></thead><tbody><tr><td>Definition</td><td>Errors are explicitly defined in the GraphQL schema</td><td>GraphQL provides standard error responses</td></tr><tr><td>Control</td><td>Fine-grained control over error structure and behavior</td><td>Limited control, standardized error format</td></tr><tr><td>Customization</td><td>Custom error types and specific error messages</td><td>Limited ability to customize error types and messages</td></tr><tr><td>Integration</td><td>Integrated with the GraphQL schema and types</td><td>Separate from the schema, less tightly coupled</td></tr><tr><td>Consistency</td><td>Ensures consistency in error handling across the API</td><td>Consistent error structure provided by the GraphQL spec</td></tr><tr><td>Ease of Use</td><td>Requires explicit error handling in resolvers and clients</td><td>Automatically handles and returns errors in responses</td></tr><tr><td>Flexibility</td><td>Can handle complex business logic and specific error cases</td><td>More suitable for simple error scenarios</td></tr><tr><td>Error Extensions</td><td>Supports additional metadata or context for errors</td><td>Limited ability to extend error information</td></tr><tr><td>Overhead</td><td>Requires additional code and complexity in the implementation</td><td>Less implementation overhead, simpler setup</td></tr></tbody></table>
<p>Both approaches have their tradeoffs, and the choice depends on the specific requirements and complexity of your GraphQL API. The errors defined in the schema approach offers more control, customization, and flexibility but comes with additional implementation complexity. On the other hand, default GraphQL errors provide simplicity, consistency, and ease of use out of the box but may be limited in customization for complex error scenarios.</p>
<p>Consider your project&#x27;s needs and development constraints when choosing the error handling approach in GraphQL.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/PalisadoesFoundation/talawa-docs/edit/develop/docs/developers/talawa-api/error-handling.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#introduction" class="table-of-contents__link toc-highlight">Introduction</a></li><li><a href="#problems-with-default-graphql-errors" class="table-of-contents__link toc-highlight">Problems with Default GraphQL Errors</a></li><li><a href="#user-errors-vs-developer-errors" class="table-of-contents__link toc-highlight">User Errors vs Developer Errors</a></li><li><a href="#the-solution" class="table-of-contents__link toc-highlight">The Solution</a><ul><li><a href="#when-to-model-errors-in-schema-and-when-not-to" class="table-of-contents__link toc-highlight">When To Model Errors In Schema And When Not To</a></li></ul></li><li><a href="#cases-where-errors-in-schema-is-recommended" class="table-of-contents__link toc-highlight">Cases Where Errors in Schema Is Recommended</a><ul><li><a href="#multiple-field-level-validation-errors--" class="table-of-contents__link toc-highlight">Multiple Field Level Validation Errors -</a></li><li><a href="#atomic-errors--" class="table-of-contents__link toc-highlight">Atomic Errors -</a></li><li><a href="#nested-resolver-errors-complex-objects" class="table-of-contents__link toc-highlight">Nested Resolver Errors. (Complex Objects)</a></li><li><a href="#nested-resolvers-errors-scalar-fields" class="table-of-contents__link toc-highlight">Nested Resolvers Errors (Scalar Fields)</a></li></ul></li><li><a href="#errors-defined-in-schema-approach-vs-default-graphql-errors" class="table-of-contents__link toc-highlight">Errors Defined in Schema Approach vs Default GraphQL Errors</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/PalisadoesFoundation/talawa#readme" target="_blank" rel="noopener noreferrer" class="footer__icon footer__slack"> Slack</a></li><li class="footer__item"><a href="https://www.palisadoes.org/news/" target="_blank" rel="noopener noreferrer" class="footer__icon footer__news"> News</a></li><li class="footer__item"><a href="https://www.palisadoes.org/contact/" target="_blank" rel="noopener noreferrer" class="footer__icon footer__contact"> Contact Us</a></li></ul></div><div class="col footer__col"><div class="footer__title">Social Media</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://twitter.com/palisadoesorg?lang=en" target="_blank" rel="noopener noreferrer" class="footer__icon footer__twitter"> Twitter</a></li><li class="footer__item"><a href="https://www.facebook.com/palisadoesproject/" target="_blank" rel="noopener noreferrer" class="footer__icon footer__facebook"> Facebook</a></li><li class="footer__item"><a href="https://www.instagram.com/palisadoes/?hl=en" target="_blank" rel="noopener noreferrer" class="footer__icon footer__instagram"> Instagram</a></li></ul></div><div class="col footer__col"><div class="footer__title">Development</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/PalisadoesFoundation" target="_blank" rel="noopener noreferrer" class="footer__icon footer__github"> GitHub</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 The Palisadoes Foundation, LLC. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>